<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro de Usuário</title>
<!-- Fonte Roboto (mesma do home) -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',sans-serif}
:root{
  --c1:#00E0FF; --c2:#FF2FB9;
  --bg:#0B1622; --panel:#0F1E2C;
  --text:#E7EEF6; --muted:#9fb1c3;
  --border:rgba(255,255,255,.12);
}

html,body{height:100%;width:100%;background:var(--bg);display:flex;justify-content:center;align-items:center;color:var(--text)}

/* Container centralizado */
.container{width:100%;max-width:520px;padding:16px}

/* Card */
.card-cadastro{
  background:var(--panel);
  border-radius:16px;
  padding:26px 20px;
  width:100%;
  box-shadow:0 18px 40px rgba(0,0,0,.35);
  border:1px solid var(--border);
}
.card-cadastro h2{
  text-align:center;margin-bottom:18px;
  font-weight:800;letter-spacing:.2px;color:var(--text)
}

/* Labels e inputs */
.card-cadastro label{
  display:block;font-size:14px;margin:12px 0 6px;color:var(--text);font-weight:600
}
.card-cadastro input{
  width:100%;padding:12px;border-radius:10px;
  background:#0a1520;color:var(--text);
  border:1px solid rgba(0,224,255,.20);font-size:15px;outline:none;transition:.2s
}
.card-cadastro input::placeholder{color:#7d93a7}
.card-cadastro input:focus{border-color:rgba(0,224,255,.45)}

/* Botão */
.card-cadastro button{
  width:100%;padding:14px;border:none;border-radius:10px;
  background:linear-gradient(135deg,var(--c1),var(--c2));
  color:#00121E;font-size:16px;font-weight:800;cursor:pointer;transition:.25s;margin-top:6px;
  border:1px solid rgba(255,255,255,.25)
}
.card-cadastro button:hover{filter:brightness(1.08)}

/* Helpers e mensagens (opcional usar) */
.helper{font-size:12px;color:var(--muted);margin-top:4px}

/* Responsivo */
@media(max-width:768px){
  .card-cadastro{padding:22px 18px}
  .card-cadastro h2{font-size:22px}
}
@media(max-width:480px){
  .card-cadastro{padding:18px 14px}
  .card-cadastro h2{font-size:20px}
  .card-cadastro label,.card-cadastro input,.card-cadastro button{font-size:14px}
  body,html{padding:0 10px}
}
</style>
</head>
<body>
<div class="container">
  <div class="card-cadastro">
    <h2>Cadastro de Usuário</h2>
    <form id="formCadastro">
      <label>Nome Login</label>
      <input type="text" id="login" required placeholder="Seu nome de usuário">
      <label>Email</label>
      <input type="email" id="email" required placeholder="voce@empresa.com">
      <label for="cpf">CPF</label>
      <input type="text" id="cpf" maxlength="14" required placeholder="000.000.000-00">
      <div class="helper" id="cpfHelper"></div>
      <label>Telefone</label>
      <input type="tel" id="telefone" required placeholder="(11) 90000-0000">
      <label>Senha</label>
      <input type="password" id="senha" required placeholder="Crie uma senha">
      <label>Confirmar Senha</label>
      <input type="password" id="senhaConfirma" required placeholder="Repita a senha">
      <button type="submit">Cadastrar</button>
    </form>
  </div>
</div>

<script>
/* CPF (máscara simples) */
document.addEventListener('DOMContentLoaded', function() {
  const cpfInput = document.getElementById('cpf');
  const helper = document.getElementById('cpfHelper');
  if (cpfInput) {
    cpfInput.addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g,'').slice(0,11);
      value = value
        .replace(/^(\d{3})(\d)/, '$1.$2')
        .replace(/^(\d{3})\.(\d{3})(\d)/, '$1.$2.$3')
        .replace(/\.(\d{3})(\d{1,2})$/, '.$1-$2');
      e.target.value = value;
      // feedback visual simples
      if (value.length === 14) {
        cpfInput.style.border = '1px solid #10b981';
        helper.textContent = 'CPF com formatação válida.';
      } else {
        cpfInput.style.border = '1px solid rgba(0,224,255,.20)';
        helper.textContent = '';
      }
    });
  }
});

/* Cadastro com API (mantido) */
document.getElementById('formCadastro').addEventListener('submit', async function(e){
  e.preventDefault();
  const login = document.getElementById('login').value;
  const email = document.getElementById('email').value;
  const telefone = document.getElementById('telefone').value;
  const senha = document.getElementById('senha').value;
  const senhaConfirma = document.getElementById('senhaConfirma').value;

  if(senha !== senhaConfirma){
    alert("As senhas não coincidem!");
    return;
  }

  try {
    const response = await fetch("http://localhost:5127/api/usuario/cadastrar", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ login, email, senha })
    });
    const result = await response.json();
    alert(result.mensagem);
    if(result.status === "novo"){
      this.reset();
    }
  } catch (error) {
    alert("Erro ao conectar com o servidor.");
  }
});

/* Cadastro local (mantido) */
document.getElementById('formCadastro').addEventListener('submit', function(e){
  e.preventDefault();
  const nome = document.getElementById('login').value;
  const email = document.getElementById('email').value;
  const telefone = document.getElementById('telefone').value;
  const senha = document.getElementById('senha').value;
  const senhaConfirma = document.getElementById('senhaConfirma').value;

  if(senha !== senhaConfirma){
    alert("As senhas não coincidem!");
    return;
  }

  const usuarios = JSON.parse(localStorage.getItem('usuarios') || '[]');
  usuarios.push({nome,email,senha});
  localStorage.setItem('usuarios', JSON.stringify(usuarios));

  alert("Usuário cadastrado com sucesso!");
  this.reset();
});
</script>
</body>
</html>
