/* ======================
   SIDEBAR / MENU (base)
====================== */

/* Sidebar */
aside{
  position:fixed; top:0; left:0;
  height:100%;
  width:var(--nav-width);
  background: linear-gradient(160deg, rgba(0,224,255,.14), rgba(255,47,185,.12)), #0A111A;
  border-right: 1px solid rgba(255,255,255,.06);
  color:#fff;
  z-index:1000;
  padding:18px 14px 18px;
  display:flex; flex-direction:column; gap:14px;
  transition:left .25s ease;
}

.brand{ display:flex; align-items:center; gap:10px; margin-bottom:4px }
.brand-logo{
  width:38px; height:38px; border-radius:9px; object-fit:cover; flex:0 0 auto;
  background:
    radial-gradient(80% 80% at 20% 20%, var(--c1), transparent),
    radial-gradient(80% 80% at 80% 80%, var(--c2), transparent);
  border:1px solid rgba(255,255,255,.18);
}
.brand strong{ font-weight:800; letter-spacing:.4px }

.user-card{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  border-radius:12px;
  padding:12px
}
.user-card .name{ font-weight:700 }
.user-card .role{ font-size:12px; opacity:.85 }

.menu{ list-style:none }
.menu li{
  display:flex; align-items:center; gap:10px;
  padding:10px 10px; border-radius:10px; cursor:pointer;
  font-weight:600; color:#e8f0f7;
  transition: background .15s ease, transform .12s ease;
}
.menu li:hover{ background:rgba(255,255,255,.08) }
.menu li.active{
  background:linear-gradient(90deg, rgba(0,224,255,.25), rgba(255,47,185,.25));
  color:#fff
}
.menu li i{ width:20px; text-align:center }

/* Submenu */
.menu li.has-submenu{ flex-direction:column; align-items:stretch; position:relative; }
.menu li.has-submenu .row-head{ display:flex; align-items:center; gap:10px; }
.menu li.has-submenu .caret{ margin-left:auto; transition:transform .2s ease; }
.menu li.has-submenu.open .caret{ transform:rotate(180deg) }
.menu li .submenu{
  display:none; list-style:none; margin-top:6px; padding-left:28px;
  border-left:1px dashed rgba(255,255,255,.18);
}
.menu li.open > .submenu{ display:block }
.menu li .submenu li{ padding:8px 10px; border-radius:8px; margin:4px 0 }
.menu li .submenu li.active,
.menu li .submenu li:hover{ background:rgba(255,255,255,.08) }

/* Footer (mobile) */
.sidebar-mobile-footer{ display:none }
@media (max-width:960px){
  .sidebar-mobile-footer{
    margin-top:auto;
    position:sticky; bottom:0;
    background:
      linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.25)),
      rgba(255,255,255,.04);
    border-top:1px solid rgba(255,255,255,.08);
    padding:12px 6px 6px;
    display:block;
  }
  .sidebar-mobile-footer .btn{ width:100% }
}

/* Main */
main{
  flex:1;
  margin-left:var(--nav-width);
  padding:18px 18px 30px;
  transition:margin-left .25s ease, padding-top .25s ease;
}

/* Topbar */
.topbar{ display:flex; align-items:center; justify-content:space-between; margin-bottom:12px }
.hello{ font-weight:800; letter-spacing:.2px }
.right{ display:flex; align-items:center; gap:10px }
.badge{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  border-radius:14px;
  padding:6px 10px;
  font-size:13px
}

@media (max-width:640px){ .col{ min-width:100%; } }


/* ======================
   BOTÃO "+" (SÓ MOBILE)
   - borda com degradê
   - fundo cor do sistema
   - não cobre conteúdo
====================== */

/* Desktop: o botão NÃO existe */
.menu-toggle{ display:none; }

/* Mobile */
@media (max-width:960px){
  :root{
    /* cor “do sistema”: tenta pegar token; cai pro seu bg padrão */
    --app-bg: var(--bg, #0A111A);
    --fab: clamp(44px, 12vw, 52px);
    --fab-border: 2px;
  }

  /* reserva espaço no topo do main pra NÃO ficar em cima da topbar */
  main{
    margin-left:0;
    padding-top: calc(18px + var(--fab) + 10px);
  }

  /* Sidebar vira drawer: fechada por padrão */
  aside{
    width: min(var(--nav-width), 86vw);
    left: calc(-1 * min(var(--nav-width), 86vw));
  }
  aside.active{ left:0; }

  /* Overlay */
  body.sidebar-open::before{
    content:"";
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.45);
    z-index:900; /* abaixo do aside (1000) */
  }
  body.sidebar-open{ overflow:hidden; }

  /* Botão + */
  .menu-toggle{
    display:inline-flex;
    position:fixed;

    /* safe-area friendly */
    top: max(12px, env(safe-area-inset-top));
    left: max(12px, env(safe-area-inset-left));

    width: var(--fab);
    height: var(--fab);
    padding:0;
    border-radius:999px;

    /* BORDA com degradê e FUNDO sólido (cor do sistema) */
    border: var(--fab-border) solid transparent;
    background:
      linear-gradient(var(--app-bg), var(--app-bg)) padding-box,
      linear-gradient(135deg, var(--c1), var(--c2)) border-box;

    color:#e8f0f7;
    align-items:center;
    justify-content:center;

    /* z-index baixo o suficiente pra não brigar com modal/sidebar */
    z-index: 950;

    cursor:pointer;
    box-shadow: 0 10px 24px rgba(0,0,0,.30);
    transition: transform .15s ease, filter .15s ease, box-shadow .15s ease;
  }

  /* transforma o ícone em "+" mesmo que o HTML esteja com fa-bars */
  .menu-toggle i{
    font-size: 22px;
    line-height: 1;
  }
  .menu-toggle i::before{
    content:"+";
    font-family: inherit; /* não usa FontAwesome aqui */
    font-weight: 900;
    display:inline-block;
    transform: translateY(-1px);
  }

  .menu-toggle:hover{
    filter: brightness(1.06);
    box-shadow: 0 12px 28px rgba(0,0,0,.36);
  }
  .menu-toggle:active{ transform: scale(.96); }

  .menu-toggle:focus-visible{
    outline: 3px solid rgba(255,255,255,.22);
    outline-offset: 3px;
  }

  /* Quando sidebar estiver aberta, some o botão */
  body.sidebar-open .menu-toggle{ display:none; }
}

/* Desktop: quando voltar a ficar grande, garante layout normal */
@media (min-width:961px){
  body.sidebar-open::before{ content:none; }
  body.sidebar-open{ overflow:auto; }
}
