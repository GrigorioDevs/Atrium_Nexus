<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Atrium.RH ‚Äî Documenta√ß√£o do Sistema</title>

  <!-- Mermaid (fluxogramas) -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ startOnLoad: true, theme: "dark" });
  </script>

  <style>
    :root{
      --bg:#0A111A;
      --card:#101a27;
      --ink:#eaf2ff;
      --muted:#a8b3c7;
      --line:rgba(255,255,255,.10);
      --c1:#00e0ff;
      --c2:#ff2fb9;
      --ok:#18d48a;
      --warn:#ffc34a;
      --bad:#ff5d5d;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(0,224,255,.10), transparent 60%),
        radial-gradient(900px 500px at 80% 0%, rgba(255,47,185,.10), transparent 60%),
        var(--bg);
      color:var(--ink);
      font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    a{color:var(--c1); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:28px}
    .hero{
      border:1px solid var(--line);
      background:linear-gradient(160deg, rgba(0,224,255,.10), rgba(255,47,185,.08)), rgba(255,255,255,.03);
      border-radius:18px;
      padding:22px 20px;
    }
    .title{
      display:flex; gap:12px; align-items:center; flex-wrap:wrap;
      margin:0 0 6px 0;
      font-weight:900; letter-spacing:.3px;
    }
    .pill{
      font-size:12px;
      border:1px solid var(--line);
      padding:4px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.04);
      color:var(--muted);
    }
    .subtitle{margin:0;color:var(--muted)}
    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:16px;
      margin-top:16px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
    .card{
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:16px;
      padding:16px;
    }
    h2,h3{margin:0 0 10px 0}
    h2{
      margin-top:22px;
      font-size:18px;
      display:flex; align-items:center; gap:10px;
    }
    h3{font-size:15px;color:#dce7ff}
    .muted{color:var(--muted)}
    .toc a{display:block;padding:6px 8px;border-radius:10px}
    .toc a:hover{background:rgba(255,255,255,.05)}
    .hr{height:1px;background:var(--line);margin:14px 0}
    .tag{
      display:inline-flex; align-items:center; gap:6px;
      padding:4px 10px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      font-size:12px;color:var(--muted);
      margin:3px 6px 3px 0;
    }
    .kpi{
      display:grid; grid-template-columns:repeat(3,1fr); gap:10px;
    }
    @media (max-width: 780px){ .kpi{grid-template-columns:1fr} }
    .kpi .box{
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      border-radius:14px;
      padding:12px;
    }
    .kpi .box b{display:block;font-size:13px}
    .kpi .box span{color:var(--muted)}
    pre, code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
    }
    pre{
      white-space:pre-wrap;
      background:rgba(0,0,0,.25);
      border:1px solid var(--line);
      padding:12px;
      border-radius:14px;
      overflow:auto;
    }
    .callout{
      border-left:4px solid rgba(0,224,255,.65);
      background:rgba(0,224,255,.07);
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(0,224,255,.18);
    }
    .callout.warn{
      border-left-color: rgba(255,195,74,.75);
      background:rgba(255,195,74,.08);
      border-color:rgba(255,195,74,.18);
    }
    .callout.bad{
      border-left-color: rgba(255,93,93,.75);
      background:rgba(255,93,93,.08);
      border-color:rgba(255,93,93,.18);
    }
    .two{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){ .two{grid-template-columns:1fr} }

    /* Mermaid container */
    .mermaid{
      background:rgba(0,0,0,.22);
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
      overflow:auto;
    }

    /* Print */
    @media print{
      body{background:#fff;color:#000}
      .wrap{max-width:none}
      .hero,.card,.mermaid,pre{background:#fff;border-color:#ddd}
      a{color:#000;text-decoration:none}
      .pill,.tag{border-color:#ddd}
      .muted{color:#444}
      .callout{border-color:#ddd;background:#f8f8f8}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1 class="title">
        üìò Atrium.RH ‚Äî Documenta√ß√£o Oficial do Sistema
        <span class="pill">Web + API + SQL Server</span>
        <span class="pill">RCR Engenharia ‚Äî RH</span>
      </h1>
      <p class="subtitle">
        Documento √∫nico para manuten√ß√£o, evolu√ß√£o e onboarding. Gere PDF via <b>Ctrl+P ‚Üí Salvar como PDF</b>.
      </p>
      <div class="hr"></div>
      <div class="kpi">
        <div class="box"><b>Frontend</b><span>HTML/CSS/JS (tabs, sidebar, m√≥dulos RH)</span></div>
        <div class="box"><b>Backend</b><span>ASP.NET Core Web API (.NET 9) ‚Äî projeto <b>Atrium.RH</b></span></div>
        <div class="box"><b>Banco</b><span>SQL Server: <b>atrium_rh</b> (tabela <b>usuario</b>)</span></div>
      </div>
    </div>

    <div class="grid">
      <div class="card toc">
        <h3>üß≠ Sum√°rio</h3>
        <a href="#visao-geral">1) Vis√£o geral</a>
        <a href="#arquitetura">2) Arquitetura & Fluxos</a>
        <a href="#frontend">3) Frontend (HTML/CSS/JS)</a>
        <a href="#permissoes">4) Perfis de acesso (permiss√µes)</a>
        <a href="#cadastro-usuario">5) Cadastro de usu√°rio (novo)</a>
        <a href="#clicksign">6) Clicksign (assinaturas) ‚Äî ideia e estrutura</a>
        <a href="#backend">7) Backend ASP.NET Core (padr√£o recomendado)</a>
        <a href="#db">8) Banco de dados (SQL Server)</a>
        <a href="#endpoints">9) Endpoints e exemplos de JSON</a>
        <a href="#checklist">10) Checklist de execu√ß√£o & troubleshooting</a>
        <a href="#roadmap">11) Pr√≥ximos passos</a>
        <div class="hr"></div>
        <div class="muted">
          Vers√£o: 2025-11-28<br/>
          Projeto: Atrium.RH
        </div>
      </div>

      <div class="card">
        <h2 id="visao-geral">üß© 1) Vis√£o geral</h2>
        <p class="muted">
          O sistema Atrium.RH √© um portal de RH com foco em <b>cart√£o de ponto</b>, <b>gest√£o de funcion√°rios</b>,
          <b>benef√≠cios</b> (VT/VR) e <b>documentos</b> (gera√ß√£o e assinatura). Possui interface web responsiva
          com menu lateral (sidebar) e abas.
        </p>

        <div class="two">
          <div class="callout">
            <b>Principais m√≥dulos</b><br/>
            ‚Ä¢ Cart√£o de Ponto (consulta, per√≠odos, PDF)<br/>
            ‚Ä¢ Incluir Ponto (geolocaliza√ß√£o/mapa)<br/>
            ‚Ä¢ Ajustar Ponto (modal)<br/>
            ‚Ä¢ Justificar Aus√™ncia (modal)<br/>
            ‚Ä¢ Pontos Justificados (listagem por funcion√°rio/per√≠odo)<br/>
            ‚Ä¢ Funcion√°rios (gest√£o + seguran√ßa do trabalho)<br/>
            ‚Ä¢ Benef√≠cios (VT/VR)<br/>
            ‚Ä¢ Documentos & Assinaturas (gerar, assinatura p√∫blica e Clicksign)
          </div>

          <div class="callout warn">
            <b>Pontos cr√≠ticos</b><br/>
            ‚Ä¢ Controle de acesso por perfil (Admin / Gest√£o / ST / Funcion√°rio)<br/>
            ‚Ä¢ Cadastro de usu√°rio (admin-only)<br/>
            ‚Ä¢ Senha armazenada em hash (requisito SHA-256)<br/>
            ‚Ä¢ Integra√ß√£o Clicksign (fluxo + webhook + envio por WhatsApp)
          </div>
        </div>

        <div class="hr"></div>

        <h2 id="arquitetura">üó∫Ô∏è 2) Arquitetura & Fluxos</h2>

        <h3>2.1 Arquitetura geral (alto n√≠vel)</h3>
        <div class="mermaid">
graph TD
  U[üë§ Usu√°rio (Browser)] -->|HTTP| FE[üñ•Ô∏è Frontend Atrium.RH]
  FE -->|REST/JSON| API[‚öôÔ∏è ASP.NET Core Web API (Atrium.RH)]
  API -->|EF Core| DB[(üóÑÔ∏è SQL Server: atrium_rh)]
  API -->|API| CS[‚úçÔ∏è Clicksign]
  CS -->|E-mail/SMS (ou link)| SIGNER[üì© Colaborador assina]
  API -->|opcional| WA[üí¨ Provedor WhatsApp (Twilio/Zenvia/360dialog)]
  WA --> SIGNER
  CS -->|Webhook| API
        </div>

        <h3>2.2 Fluxo ‚Äî Registrar ponto (geolocaliza√ß√£o)</h3>
        <div class="mermaid">
flowchart TD
  A[Abrir aba "Incluir Ponto"] --> B[Init Map (Leaflet)]
  B --> C{Geolocaliza√ß√£o dispon√≠vel?}
  C -- Sim --> D[Captura coords + salva lastLatLng]
  C -- N√£o --> E[Usa fallback]
  D --> F[Clicar "Incluir Ponto"]
  E --> F
  F --> G[Calcula Entrada/Sa√≠da (nextTypeFor)]
  G --> H[Grava batimento (localStorage)]
  H --> I[Atualiza tabela de ponto / abre modal do dia]
        </div>

        <h3>2.3 Fluxo ‚Äî Cadastro de usu√°rio (novo)</h3>
        <div class="mermaid">
flowchart TD
  A[Admin abre "Cadastrar Usu√°rio"] --> B[Frontend valida CPF/Email/Telefone + Senha/Confirma]
  B --> C[POST /api/usuarios]
  C --> D[Service valida duplicidades (cpf/email/login)]
  D --> E[Calcula novo Id = MAX(id)+1]
  E --> F[Hash SHA-256 da senha]
  F --> G[INSERT tabela usuario]
  G --> H[Retorna id + mensagem]
        </div>

        <h3>2.4 Fluxo ‚Äî Clicksign com envio por WhatsApp (meta desejada)</h3>
        <div class="mermaid">
flowchart TD
  A[Selecionar Documento + Funcion√°rio] --> B[Auto-preencher Email/Telefone]
  B --> C[Clicar "Enviar para Clicksign"]
  C --> D[API cria envelope/documento no Clicksign]
  D --> E[API adiciona signat√°rio (email)]
  E --> F[Clicksign retorna sign_url / key]
  F --> G[API salva key/url no banco]
  G --> H[API envia link via WhatsApp (provedor)]
  H --> I[Funcion√°rio assina]
  I --> J[Clicksign chama Webhook (assinado)]
  J --> K[API baixa PDF assinado e marca status]
        </div>

        <div class="callout">
          <b>Observa√ß√£o importante:</b> Clicksign normalmente notifica por e-mail. WhatsApp exige um <b>provedor</b> (Twilio, Zenvia, 360dialog, etc.)
          e templates aprovados (dependendo do provedor). O link de assinatura pode ser o <code>sign_url</code> retornado pelo Clicksign.
        </div>

      </div>
    </div>

    <div class="card" style="margin-top:16px" id="frontend">
      <h2>üñ•Ô∏è 3) Frontend (HTML/CSS/JS)</h2>

      <h3>3.1 Estrutura de UI (padr√£o)</h3>
      <p class="muted">
        A UI √© baseada em: <b>sidebar fixa</b> (desktop) + <b>drawer</b> (mobile), abas (tabs) e modais.
      </p>
      <div class="tag">üìå Sidebar: <code>#sidebar</code></div>
      <div class="tag">üìå Menu: <code>#menu</code> (<code>li[data-tab]</code>)</div>
      <div class="tag">üìå Tabs: <code>.tab</code> + <code>.tab.active</code></div>
      <div class="tag">üìå Mobile toggle: <code>#btnHamb</code> (bot√£o + estilo Instagram)</div>

      <div class="hr"></div>

      <h3>3.2 CSS ‚Äî comportamento mobile da sidebar</h3>
      <pre>
- Desktop: sidebar fixa √† esquerda + main com margin-left: var(--nav-width)
- Mobile (&lt;= 960px):
  - main: margin-left: 0
  - sidebar: fica fora da tela (left negativo)
  - quando JS adiciona .active em #sidebar: sidebar entra (left: 0)
  - body.sidebar-open cria overlay (pseudo-elemento) e trava scroll
      </pre>

      <h3>3.3 JS ‚Äî m√≥dulos principais (descri√ß√£o)</h3>
      <div class="two">
        <div class="card">
          <b>assets/js/home.js</b><br/>
          <span class="muted">
            ‚Ä¢ controla menu/sidebar/tabs<br/>
            ‚Ä¢ inicializa rel√≥gio<br/>
            ‚Ä¢ integra mapa/geo p/ incluir ponto<br/>
            ‚Ä¢ movimenta grade de funcion√°rios entre abas<br/>
            ‚Ä¢ dispara renderiza√ß√µes (VT/VR, docs, etc.)<br/>
          </span>
        </div>
        <div class="card">
          <b>assets/js/ponto.js</b><br/>
          <span class="muted">
            ‚Ä¢ l√≥gica e render do cart√£o de ponto<br/>
            ‚Ä¢ localStorage dos batimentos<br/>
            ‚Ä¢ modal de batimentos por dia<br/>
          </span>
        </div>
      </div>
      <div class="two" style="margin-top:10px">
        <div class="card">
          <b>assets/js/funcionarios.js</b><br/>
          <span class="muted">
            ‚Ä¢ cadastro/listagem de colaboradores<br/>
            ‚Ä¢ documentos (explorador de arquivos)<br/>
            ‚Ä¢ documentos importantes + lembretes<br/>
          </span>
        </div>
        <div class="card">
          <b>assets/js/doc.assinatura.js</b><br/>
          <span class="muted">
            ‚Ä¢ gera√ß√£o de documentos (wizard) + templates<br/>
            ‚Ä¢ editor e preview + export PDF<br/>
          </span>
        </div>
      </div>
      <div class="two" style="margin-top:10px">
        <div class="card">
          <b>assets/js/assinatura-publica.js</b><br/>
          <span class="muted">
            ‚Ä¢ fluxo de assinatura p√∫blica via hash<br/>
            ‚Ä¢ canvas de assinatura + PDF final<br/>
          </span>
        </div>
        <div class="card">
          <b>assets/js/assinatura-clicksign.js</b><br/>
          <span class="muted">
            ‚Ä¢ integra sub-abas (Gerar / Assinar)<br/>
            ‚Ä¢ chama backend: /api/clicksign/send e /download<br/>
          </span>
        </div>
      </div>

      <div class="hr"></div>

      <h3>3.4 Diret√≥rio (vis√£o recomendada + atual)</h3>
      <pre>
Atrium-rh/
  Program.cs
  Atrium.RH.csproj
  Atrium-rh.sln
  appsettings.json
  appsettings.Development.json
  Properties/
    launchSettings.json
  Controllers/
    UsuariosController.cs
    (ClicksignController.cs - recomendado)
  Services/
    UsuariosService.cs
    (ClicksignService.cs - recomendado)
  Data/
    AtriumRhDbContext.cs
  Domain/
    Entities/
      Usuario.cs
  Dtos/
    Usuarios/
      UsuarioCadastroDto.cs
      (LoginDto.cs - recomendado)
  Utils/
    Normalizacao.cs (CPF/Telefone)
    Hashing.cs (SHA-256)
  assets/
    css/ (reset, tokens, base, layout, components, m√≥dulos, overrides)
    js/  (core, home, ponto, funcionarios, beneficios, docs, clicksign, etc.)
  *.html (home.html, index.html, register.html etc.)
      </pre>

      <div class="callout warn">
        <b>Nota:</b> voc√™ tem pastas <code>assets/</code> e tamb√©m aparece <code>Assets/</code> em alguns paths no HTML.
        Em Windows funciona, mas isso pode quebrar em servidor Linux (case-sensitive). Padronize tudo para <code>assets</code>.
      </div>
    </div>

    <div class="card" style="margin-top:16px" id="permissoes">
      <h2>üõ°Ô∏è 4) Perfis de acesso (permiss√µes)</h2>
      <p class="muted">Perfis definidos no sistema:</p>
      <pre>
Admin (type_user=1):
  - Acesso total
  - Pode criar usu√°rios

User Gest√£o (type_user=2):
  - Acesso geral
  - Exceto: incluir ponto e criar usu√°rio

User ST (type_user=3):
  - Acesso apenas na √°rea Seguran√ßa do Trabalho / Funcion√°rios

User Funcion√°rio (type_user=4):
  - Acesso somente ao cart√£o de ponto e registrar ponto
      </pre>

      <div class="callout">
        <b>Regra de neg√≥cio:</b> a op√ß√£o ‚ÄúCadastrar Usu√°rio‚Äù deve aparecer no menu <b>somente</b> para Admin.
        No backend, isso deve ser refor√ßado por autoriza√ß√£o (n√£o s√≥ esconder no front).
      </div>
    </div>

    <div class="card" style="margin-top:16px" id="cadastro-usuario">
      <h2>üë§ 5) Cadastro de usu√°rio (novo)</h2>

      <h3>5.1 Campos UI (tela)</h3>
      <pre>
Nome Login          placeholder: Seu nome de usu√°rio
Email               placeholder: voce@empresa.com
CPF                 placeholder: 000.000.000-00
Telefone            placeholder: (11) 90000-0000
Senha               placeholder: Crie uma senha
Confirmar Senha     placeholder: Repita a senha
Perfil de acesso    select: Admin | User Gest√£o | User ST | User Funcion√°rio
      </pre>

      <h3>5.2 Valida√ß√µes (frontend)</h3>
      <pre>
- CPF: validar d√≠gitos (front com m√°scara; enviar sem m√°scara)
- Email: regex b√°sica + obrigat√≥rio
- Telefone: m√°scara no front; enviar s√≥ n√∫meros
- Senha: m√≠nimo recomendado (ex.: 8 chars) + confirmar
- Perfil: obrigat√≥rio
      </pre>

      <div class="callout warn">
        <b>Seguran√ßa:</b> Mesmo que o requisito pe√ßa SHA-256, o ideal √© usar <b>hash com salt e custo</b> (BCrypt/Argon2).
        Se ficar SHA-256, pelo menos use salt (e guarde separado).
      </div>
    </div>

    <div class="card" style="margin-top:16px" id="clicksign">
      <h2>‚úçÔ∏è 6) Clicksign ‚Äî ideia e estrutura</h2>
      <p class="muted">
        Objetivo: selecionar documento + vincular funcion√°rio ‚Üí auto preencher e-mail/celular ‚Üí enviar p/ Clicksign ‚Üí enviar link pro WhatsApp ‚Üí baixar PDF assinado.
      </p>

      <h3>6.1 √â poss√≠vel?</h3>
      <div class="callout">
        ‚úÖ <b>Sim</b>, com esses componentes:<br/>
        1) Backend cria documento/envelope na Clicksign e pega <code>key</code> e/ou <code>sign_url</code>.<br/>
        2) Backend salva no banco o v√≠nculo <code>documentoId</code> ‚Üî <code>usuarioId</code> ‚Üî <code>clicksignKey</code>.<br/>
        3) Clicksign notifica por e-mail (padr√£o). Para WhatsApp, voc√™ usa um provedor de WhatsApp e manda o link.<br/>
        4) Para saber quando assinou, use <b>webhook</b> do Clicksign (ou polling) e atualize status.<br/>
      </div>

      <h3>6.2 O que voc√™ precisa criar no backend</h3>
      <pre>
- ClicksignService:
  - CreateDocument(...) / UploadPDF(...)
  - AddSigner(...)
  - GetSignUrl(...)
  - DownloadSignedPdf(...)
  - Webhook handler (Update status)

- ClicksignController:
  POST /api/clicksign/send
  GET  /api/clicksign/download/{key}
  POST /api/clicksign/webhook (recebe eventos)

- WhatsAppService (opcional):
  - SendMessage(phone, text/link)
      </pre>
    </div>

    <div class="card" style="margin-top:16px" id="backend">
      <h2>‚öôÔ∏è 7) Backend ASP.NET Core (Atrium.RH)</h2>

      <h3>7.1 Stack atual (observado)</h3>
      <pre>
- .NET: net9.0
- DB: SQL Server (Microsoft.Data.SqlClient)
- ORM: EF Core
- Swagger: Swashbuckle (corrigido ap√≥s conflito Microsoft.OpenApi)
      </pre>

      <h3>7.2 Camadas (recomendado)</h3>
      <pre>
Controllers/  -> entrada HTTP
Services/     -> regras de neg√≥cio
Data/         -> DbContext e mapeamentos
Domain/       -> entidades
Dtos/         -> contratos de entrada/sa√≠da
Utils/        -> normaliza√ß√£o, hashing, valida√ß√µes
      </pre>

      <div class="callout">
        <b>Observa√ß√£o:</b> quando o Swagger mostrou ‚ÄúNo operations defined in spec‚Äù, a causa t√≠pica √©:
        controllers n√£o mapeados (<code>app.MapControllers()</code>) ou <code>AddControllers()</code> ausente.
      </div>
    </div>

    <div class="card" style="margin-top:16px" id="db">
      <h2>üóÑÔ∏è 8) Banco de dados (SQL Server)</h2>

      <h3>8.1 Conex√£o (refer√™ncia)</h3>
      <pre>
Server=STORMZERAGG;Database=atrium_rh;User Id=system;Password=***;TrustServerCertificate=True;
      </pre>
      <div class="callout warn">
        <b>Recomenda√ß√£o:</b> n√£o versionar senha no Git. Use User Secrets / env var.
      </div>

      <h3>8.2 Tabela: usuario (requisito)</h3>
      <pre>
PK: id

id                 int (ValueGeneratedNever / MAX+1)
lociid              int default 1
ativo               bit (0/1) default 1
criacao             datetime (GMT-3)
datasincronizacao   datetime null
datainterface       datetime null
cpf                 varchar(11) (sem m√°scara) UNIQUE
nome                varchar(120)
email               varchar(180) UNIQUE
login               varchar(80) UNIQUE
senha               varchar(64) (sha256 hex)
telefone            varchar(20) (sem m√°scara)
type_user           int (1..4)
user_img            varchar(300) null
      </pre>

      <h3>8.3 Observa√ß√µes de concorr√™ncia (MAX+1)</h3>
      <div class="callout bad">
        <b>IMPORTANTE:</b> MAX(id)+1 pode dar colis√£o se dois cadastros ocorrerem ao mesmo tempo.
        Solu√ß√µes: <br/>
        ‚Ä¢ trocar para IDENTITY no banco, ou<br/>
        ‚Ä¢ gerar em transa√ß√£o com lock apropriado, ou<br/>
        ‚Ä¢ usar SEQUENCE (SQL Server) e obter pr√≥ximo valor.
      </div>
    </div>

    <div class="card" style="margin-top:16px" id="endpoints">
      <h2>üîå 9) Endpoints e exemplos de JSON</h2>

      <h3>9.1 Login (observado no Program.cs)</h3>
      <pre>
POST /api/usuario/login
Body:
{
  "cpf": "00000000000",
  "login": "gustavo",
  "senha": "123"
}
      </pre>

      <h3>9.2 Cadastro de usu√°rio (novo)</h3>
      <pre>
POST /api/usuarios
Header:
  X-User-Type: 1   (Admin)

Body sugerido (DTO):
{
  "nome": "Maria Souza",
  "login": "maria.souza",
  "email": "maria@empresa.com",
  "cpf": "12345678901",
  "telefone": "11990000000",
  "senha": "SenhaForte@123",
  "confirmarSenha": "SenhaForte@123",
  "typeUser": 2
}
      </pre>

      <h3>9.3 Clicksign (proposto)</h3>
      <pre>
POST /api/clicksign/send
{
  "documentoId": 123,
  "usuarioId": 55
}

Resposta:
{
  "clicksignKey": "abc123",
  "signUrl": "https://app.clicksign.com/.../sign",
  "message": "Enviado para assinatura."
}

GET /api/clicksign/download/{key}
-> retorna application/pdf (PDF assinado)
      </pre>
    </div>

    <div class="card" style="margin-top:16px" id="checklist">
      <h2>‚úÖ 10) Checklist de execu√ß√£o & troubleshooting</h2>

      <h3>10.1 Rodar API</h3>
      <pre>
dotnet restore
dotnet build
dotnet run

Swagger:
http://localhost:5253/swagger
      </pre>

      <h3>10.2 Swagger ‚ÄúNo operations defined in spec‚Äù</h3>
      <pre>
Verifique se existe:
- builder.Services.AddControllers();
- app.MapControllers();

E no Swagger:
- builder.Services.AddSwaggerGen();
- app.UseSwagger();
- app.UseSwaggerUI();
      </pre>

      <h3>10.3 Erro Microsoft.OpenApi / downgrade</h3>
      <pre>
Sintoma:
- ReflectionTypeLoadException
- NU1605 downgrade Microsoft.OpenApi

Causa:
- vers√µes conflitando entre Swashbuckle e Microsoft.OpenApi referenciada diretamente

Corre√ß√£o:
- remover refer√™ncia direta Microsoft.OpenApi (ou alinhar vers√£o >= exigida pelo Swashbuckle)
      </pre>
    </div>

    <div class="card" style="margin-top:16px" id="roadmap">
      <h2>üöÄ 11) Pr√≥ximos passos</h2>
      <div class="two">
        <div class="callout">
          <b>Curto prazo</b><br/>
          ‚Ä¢ Finalizar endpoint real de cadastro de usu√°rio (persistindo no SQL)<br/>
          ‚Ä¢ Implementar autentica√ß√£o real (JWT) + autoriza√ß√£o por perfil<br/>
          ‚Ä¢ Ajustar menu para exibir ‚ÄúCadastrar Usu√°rio‚Äù s√≥ para Admin<br/>
          ‚Ä¢ Padronizar assets/Assets (case-sensitive)
        </div>
        <div class="callout warn">
          <b>M√©dio prazo</b><br/>
          ‚Ä¢ Clicksign completo: salvar chave/url/status + webhook<br/>
          ‚Ä¢ WhatsApp: integrar provedor e disparar link para o colaborador<br/>
          ‚Ä¢ Auditoria: logs de a√ß√µes (quem cadastrou, quando)<br/>
          ‚Ä¢ Melhorar senha: BCrypt/Argon2 (se poss√≠vel)
        </div>
      </div>

      <div class="hr"></div>
      <p class="muted">
        Fim do documento.
      </p>
    </div>

    <div class="muted" style="text-align:center;margin:18px 0 6px">
      ¬© Atrium ‚Ä¢ 2025 ‚Ä¢ Documento gerado em HTML para exportar PDF
    </div>

  </div>
</body>
</html>
